<div class="screen cartridge-screen" data-type="screen" data-screen-name="cartridges">
    <div class="screen-background"></div>
    <div class="screen-content">
        
        <div class="box current-cartridge">
            <h2>Save</h2>
            <p class="description">
                Save the image below to your device. It contains the current state of your
                game, your settings, and what's in your quicksave slot.
            </p>
            <a class="download-link" data-type="cartridge-link" href="{cartridge_url}" download="toothrot-datacard.png">
                <img class="cartridge-image" data-type="cartridge-image" src="{cartridge_url}" alt="Click to download current datacard" />
            </a>
        </div>
        <div class="box load-cartridge">
            <h2>Load</h2>
            <div class="upload-container">
                <input type="file" class="file" />
                <div class="fake-file">
                    <p class="description">
                        Click to select a datacard image to load
                    </p>
                </div>
            </div>
        </div>
        
        <div class="screen-buttons">
            <button class="button"
                    data-focus-mode="screen"
                    data-type="menu-item"
                    data-target="back">
                Back
            </button>
        </div>
    </div>
    <script>
        (function () {
            
            var fake = document.querySelector(".fake-file-input");
            var file = document.querySelector(".file");
            var uploadContainer = document.querySelector(".upload-container");
            var downloadLink = document.querySelector(".download-link");
            
            function onClick(event) {
                event.stopPropagation();
            }
            
            function onFileChange(event) {
                engine.emit("cartridge_file_change", event);
            }
            
            uploadContainer.addEventListener("click", onClick);
            downloadLink.addEventListener("click", onClick);
            file.addEventListener("change", onFileChange);
            
        }());
    </script>
</div>